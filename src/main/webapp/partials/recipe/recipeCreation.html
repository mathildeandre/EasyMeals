<article class="myArticle artRecipeCreation" ng-controller="RecipeCreationCtrl">

    <div class="myArticleHeading artHeadingRecipeCreation">
        <div class="myArticleTitle titleInlineBlock">Creation {{displayRecipeTypeName}}</div>
        <div class="rightInlineBlock">
            <a href="#/recipe/{{recipeTypeName}}" class="btn btn-warning">
                Revenir aux recettes
                &nbsp
                <span class="glyphicon glyphicon-share-alt "></span>
            </a> <!--creer nouveau plat-->

        </div>
    </div>


    <div class="myArticleBody">
        <form name="form" novalidate class="css-form">
            <div class="lineRecipeInit">
                <div class="form-group fieldCreationNameRecipe inlineBlock">
                    <div class="input-group">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-tag"></span></span>
                        <input class="form-control "
                               placeholder="Recipe name (max 20 char)"
                               type="text"
                               ng-model="recipe.name"
                               name="rName"
                               ng-maxlength="20"
                               required/>

                    </div>
                            <span ng-show="form.rName.$error.required && form.rName.$dirty">
                                Required
                            </span>

                    <!--
                    Nom recette :
                    <input class="fieldRecipeCreation nameRecipe"  type="text" ng-model ='recipe.name' placeholder="Nom recette" required />
                    -->
                </div>
                <div class="form-group fieldRecipeCreationNbPers inlineBlock">
                    <div class="input-group ">
                        <span class="input-group-addon"> Pour : </span>
                        <!-- class="input-group-addon"><span class="glyphicon glyphicon-tag"></span></span> -->
                        <input class="form-control"
                               placeholder="4"
                               type="number"
                               ng-model="recipe.nbPerson"
                               name="nbPers"
                               ng-maxlength="20"
                               required/>
                        <span class="input-group-addon"> personnes </span>
                    </div>
                            <span ng-show="form.nbPers.$error.required && form.nbPers.$dirty">
                                Required
                            </span>
                    <!--
                    Nombre de personnes :
                    <input class="fieldRecipeCreation fieldRecipeCreationWidth" type="number" ng-model ='recipe.nbPerson' min="1" placeholder="Ex:4" required/>
                    -->
                </div>
            </div>
            <div class="lineTime">
                <div class="form-group fieldRecipeCreationPrepTime inlineBlock">
                    <div class="input-group ">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
                        <span class="input-group-addon">Preparation</span>
                        <input class="form-control"
                               placeholder="20"
                               type="number"
                               ng-model="recipe.timePreparation"
                               name="timePrep"
                               ng-maxlength="20"
                               required/>
                        <span class="input-group-addon"> min </span>

                        <!-- <input class="fieldRecipeCreation fieldRecipeCreationWidth" type="number"
                                ng-model='recipe.timePreparation' min="0" step="5" required/> -->

                    </div>
                    <span ng-show="form.timePrep.$error.required && form.timePrep.$dirty">
                                Required
                    </span>
                </div>
                <div class="form-group fieldRecipeCreationCookTime inlineBlock">
                    <div class="input-group ">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
                        <span class="input-group-addon">Cuisson</span>
                        <input class="form-control"
                               placeholder="20"
                               type="number"
                               ng-model="recipe.timeCooking"
                               name="timeCook"
                               required/>
                        <span class="input-group-addon"> min </span>
                        <!--
                        <input class="fieldRecipeCreation fieldRecipeCreationWidth" type="number"
                               ng-model='recipe.timeCooking' min="0" step="5" required/>
                        min
                        --
                    </div>
                </div>
            </div>

            <div class="lineSpeciality">
                <div class="form-group fieldRecipeCreationSpecilaity inlineBlock">
                    <div class="input-group ">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-globe"></span></span>
                        <select class="fieldRecipeCreation" ng-model='recipe.origin'
                                ng-options='origin.name for origin in origins'>
                            <option value="" disabled="disabled">Specialite</option>
                        </select><!--ng-model='originSelected' ng-init="originSelected=origins[4]"-->
                    </div>
                    <span ng-show="form.number.$error.required && form.number.$dirty">
                                Required
                    </span>
                </div>

                <div>
                    <div class="form-group inlineBlock">
                        <div class="input-group ">
                            <select class="fieldRecipeCreation" ng-model='recipe.origin'
                                    ng-options='origin.name for origin in origins'>
                                <option value="" disabled> Specialite</option>
                            </select><!--ng-model='originSelected' ng-init="originSelected=origins[4]"-->
                        </div>
                    </div>

                    <!---- ------------------------- CATEGORIE ----------------------------->
                    <div class="form-group fieldRecipeCreationCategory inlineBlock">
                        <div class="input-group ">
                            <span class="myAddon ">Categories </span>

                        <span ng-repeat="category in categories"
                              class="fieldRecipeCreationCategoryChoice checkbox checkbox-warning
                              checkbox-inline">
                        <input type="checkbox" ng-model="category.checked" id="{{category.id}}">
                        <label for="{{category.id}}">{{category.name}}</label>
                        </span>
                        </div>
                    </div>
                </div>


                <!---- ------------------------- INGREDIENTS - ---------------------------->
                <div class="form-group formIngredients2">

                    <div class="inlineBlockAlignTop">
                        Ingr√©dients : &nbsp
                    </div>

                    <div class="input-group ">
                        <div class="inlineBlock">

                            <div class="rowIngredientInput myAddon lineIngredient"
                                 ng-repeat="ingredient in recipe.ingredients ">
                                <input class="fieldRecipeCreation fieldRecipeCreationWidth" type="number"
                                       ng-model='ingredient.qty' min="0" step="{{unitStep(ingredient.unit)}}"
                                       placeholder="Ex: 50" required/>
                                <select class="fieldRecipeCreationUnit fieldRecipeCreation" ng-model='ingredient.unit'
                                        ng-options='unit for unit in units'></select>

                                <input class="fieldRecipeCreation nameFood" type="text" ng-model='ingredient.food.name'
                                       class="inputIngredientFoodName"
                                       ng-class="{backgroundRed:ingredient.food.id==0 , backgroundGreen:ingredient.food.id>0}"
                                       ng-focus="onFocusInputIngredient(ingredient)" ng-blur="onBlurInputIngredient()"
                                       ng-keyup="keyUpdateFilter(ingredient.food.name)" placeholder="aliment" required/>

                                <button type="button" class="myBtnEmpty myBtnEmptyRecipe btnMinusFilter"
                                        ng-click="removeRowIngredient($index,ingredient)">
                                    <span class="glyphicon glyphicon-minus"></span>
                                </button>
                            </div>

                            <button type="button" class="myBtnEmpty myBtnEmptyRecipe" ng-click="addRowIngredient()">
                                <span class="glyphicon glyphicon-plus littlePlus"></span>
                                <span class="txtFilter">INGREDIENT</span>
                            </button>
                        </div>

                    </div>

                    <div class="myBlockFoodProposition" ng-show="showFoods">
                        <div class="myBlockFoodPropositionTitle">Proposition(s) aliment(s)</div>
                        <span class="foodProposition" ng-repeat="food in foods | filter : filterFood | orderBy : 'name'">
                            <button type="button" class="myBtnEmpty myBtnEmptyRecipe"
                                    ng-mousedown="fillUpIngrWithFood($index, $event, food) ">
                                <span class="txtFilter">{{food.name}}</span>
                            </button>
                        </span>
                    </div>
                </div>


                <!---- ------------------------- DESCRIPTIONS - ---------------------------->

                <div class="form-group formDescription">
                    <div class="inlineBlockAlignTop">
                        Pr√©paration : &nbsp
                    </div>

                    <div class="input-group ">
                        <div class="inlineBlockAlignTop">
                            <div class="rowDescriptionInput myAddon"
                                 ng-repeat="description in recipe.descriptions ">
                                <div class="inlineBlockAlignTop">
                                    Etape {{description.numDescrip}}
                                </div>

                                <div class="inlineBlockAlignTop">
                            <textarea class="fieldRecipeCreation descriptArea" ng-model='description.name'
                                      placeholder="Etape n¬∞{{description.numDescrip}}" rows="1"
                                      ng-keyup="pressEnterAreaDescrip($event)"></textarea>
                                </div>
                                <div class="inlineBlockAlignTop">
                                    <button type="button" class="myBtnEmpty myBtnEmptyRecipe btnMinusFilter"
                                            ng-click="removeDescription($index,ingredient)">
                                        <span class="glyphicon glyphicon-minus"></span>
                                    </button>
                                </div>
                            </div>

                            <button type="button" class="myBtnEmpty myBtnEmptyRecipe" ng-click="addDescription()">
                                <span class="glyphicon glyphicon-plus littlePlus"></span>
                                <span class="txtFilter">ETAPE DESCRIPTION</span>
                            </button>

                        </div>
                    </div>
                </div>

             <span class="radio radio-warning radio-inline ">
                    <input type="radio" ng-model="recipe.isPublic" ng-value="true"
                           checked="checked" id="public1">
                    <label for="public1">
                        publique
                    </label>
                </span>
                <span class="radio radio-warning radio-inline">
                    <input type="radio" ng-model="recipe.isPublic" ng-value="false"
                           checked="checked" id="private1">
                    <label for="private1">
                        priv√©e
                    </label>
                </span>

                <!--
                $scope.publicOrNots = [{id:"public1", name:"publique", value:true},{id:"private1", name:"priv√©e", value:false} ]
                <span  ng-repeat="publicornot in publicOrNots" class="radio radio-warning radio-inline">
                    <input type="radio" ng-model="recipe.isPublic" ng-value="publicornot.value"
                           checked="checked" id="{{publicornot.id}}">
                    <label for="{{publicornot.id}}">
                        {{publicornot.name}}
                    </label>
                </span>-->

                <br>

                <!--<input type="submit" class="btn btn-warning" value="Cr√©er {{recipe.name}}" ng-click="createRecipe()" />-->
                <!--
                <a class="btn  btn-success btn-block" type="submit" ng-click="createRecipe()"
                   ng-disabled="form.$invalid"> Cr√©er votre
                    recette {{recipe.name}}
                </a>
                -->


                <button type="submit" class="butonCreateRecipe btn btn-warning btn-block" ng-click="createRecipe()"
                        ng-disabled="form.$invalid || form.$pending">
                    Cr√©er votre recette {{recipe.name}}
                </button>


        </form>
    </div>


    <!-- DEBUG -->
    <div ng-show="showDebug" style="font-size: 18px; color:darkorange">
        <div>
            SPECIALITE :::
            <div> {{recipe.origin}}</div>
            CATEGORIES :::
            <div ng-repeat="category in recipe.categories ">
                {{category}}
            </div>
        </div>
        <div>
            INGREDIENTS :::
            <div ng-repeat="ingredient in recipe.ingredients ">
                {{ingredient}}
            </div>
        </div>
        <div>
            DESCRIPTIONS :::
            <div ng-repeat="description in recipe.descriptions ">
                {{description}}
            </div>
        </div>
        <br>
        <br>
        <div>
            RECIPE :::
            {{recipe}}
        </div>
    </div>
</article>