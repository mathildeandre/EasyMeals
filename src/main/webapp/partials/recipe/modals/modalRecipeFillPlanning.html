<div>

    <div class="modal-header">
        <h3 class="modal-title" >Choisir une case du planning pour insérer la recette</h3>
    </div>

    <div class="modal-body" ><!--style="color:black; height: 700px;" -> height fonctionne à voir qd bcp recettes-->




        <article class="myArticle myArticlePlanning" ng-show="plannings.length > 0">
            <div class="myArticleHeading">
                <div class="myArticleTitle">
                    PLANNING : &nbsp
                    <select class="fieldPlanning noWidth" ng-model='currentPlanning' ng-options='planning.name for planning in plannings'></select>
                </div>
            </div>



            <div class="myArticleBody">
                <div ng-controller="PlanningModalCaseMealCtrl">
                    <table class="table  table-hover table-bordered">
                        <th class="info myTh"></th>
                        <th class="info myTh">Lundi</th>
                        <th class="info myTh">Mardi</th>
                        <th class="info myTh">Mercredi</th>
                        <th class="info myTh">Jeudi</th>
                        <th class="info myTh">Vendredi</th>
                        <th class="info myTh">Samedi</th>
                        <th class="info myTh">Dimanche</th>

                        <tr ng-repeat="weekMeal in currentPlanning.weekMeals" ng-show="weekMeal.show">

                            <th class="info myTh" style="height:80px; width:9%; vertical-align:middle">
                                {{displayMealType(weekMeal.weekMealName)}}
                            </th>

                            <td ng-repeat="caseMeal in weekMeal.caseMeals" class="tdCaseMeal" ng-click="openModal(recipesToDisplay, caseMeal)"
                                data-drop="true" ng-model='caseMeal.recipes' jqyoui-droppable="{multiple:true}">
                                <!--, onOver:'onOverTab(\'hehehe\')' -->

                            <span ng-show="caseMeal.recipes.length > 0 && showNbPers" class="nbPers" ng-click="stopPropag($event)" data-drop="true" ng-model='caseMeal.nbPers' jqyoui-droppable="{multiple:true}">
                                {{caseMeal.nbPers}} pers.
                            </span>

                                <span ng-show="showDebug" style="font-size: 18px; color:darkorange">id caseMeal : {{caseMeal.id}}</span>
                                <!--ng-repeat="recipe in caseMeal.recipes  | orderByRecipeType" -->
                                <!--track by $index permet d'avoir 2x le mm element dans un drop sans bug -->
                                <div ng-repeat="recipe in caseMeal.recipes  track by $index "
                                     class="itemToDragPlanning itemDrag" style="display: inline-block;"
                                     data-drag="true" data-jqyoui-options="{revert: 'invalid', helper:'clone'}"
                                     ng-model="caseMeal.recipes" ng-show="recipe.name"
                                     jqyoui-draggable="{index: {{$index}},placeholder:false , deepCopy:'true'}">

                                    {{recipe.name}}

                                    <br>
                                </div>
                                <!-- modal
                                <button ng-click="incr()">
                                    click
                                </button>
                                <button type="button" class="btn btn-default" ng-click="open(recipesToDisplay)">Open me!</button>
                                -->
                            </td>
                        </tr>
                    </table>
                </div>

                <!-- DEBUG -->
                <div ng-show="showDebug" style="font-size: 18px; color:darkorange">
                    <div ng-repeat="recipe in currentPlanning.weekMeals[1].caseMeals[0].recipes">
                        {{recipe.name}}
                    </div>
                </div>


                <div>
                    <div style="display:inline-block">
                        <div>
                            <span>Afficher / Cacher : &nbsp&nbsp&nbsp&nbsp</span>
                        <span ng-repeat="weekMeal in currentPlanning.weekMeals"
                              class="checkbox checkbox-info checkbox-inline">
                            <input type="checkbox" ng-model="weekMeal.show" id="{{weekMeal.id}}">
                            <label for="{{weekMeal.id}}"><b>{{displayMealType(weekMeal.weekMealName)}}</b>
                                &nbsp&nbsp</label>
                        </span>
                        </div>
                        <div>
                            <span class="checkbox checkbox-info checkbox-inline">
                                <input type="checkbox" ng-model="showNbPers" id="idShowPers">
                                <label for="idShowPers">Voir pour chaque repas</label>
                            </span>
                        </div>
                        <div ng-show="showHelp" style="font-size: 18px; color:cornflowerblue">
                            <div>Apres avoir choisi le nombre de personne global, il est possible de le modifier pour un
                                repas en particulier : cocher "afficher nb pers." puis modifier directement le nb dans
                                le repas ou y faire glisser le nb ci-dessous
                            </div>
                        </div>
                        <div>
                            <!--<input type="checkbox" ng-model="showNbPers" >Show NbPers &nbsp-->

                            <!-- Partie avec case nbPers to drag into planning --
                            <span ng-show="showNbPers">
                                <span ng-show="showHelp" style="font-size: 18px; color:cornflowerblue">- Modifier nb pers puis faire <b>glisser</b> sur un item 'pers' d'une case du planning :</span>
                                <span ng-show="!showHelp">- <b>Glisser</b> dans une case Nb pers. :</span>
                                <span class="itemToDragPlanning nbPers" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper:'clone'}" ng-model="nbPers"
                                      jqyoui-draggable="{placeholder:'keep', deepCopy:'true'}">
                                    <input class="inputNbPers" type="number" min="1" ng-model="nbPers"><span class="glyphicon glyphicon-tag"></span>
                                </span>
                            </span>
                            -->
                        </div>
                    </div>

                    <div class="rightInlineBlock rightTrashPlanning">
                        <div id="trashPlanning" class="glyphicon glyphicon-trash" style="font-size: 50px; color:#5bc0de"
                             data-drop="{{dataDropTrash}}" ng-model='trash'
                             jqyoui-droppable="{multiple:true, onOver:'onOverTrash()', onOut:'onOutTrash()', onDrop:'onOutTrash()'}">
                            <!-- , onOver:'onOverTrash()', onOut:'onOutTrash()' }" -->
                        </div>
                    </div>

                    <!-- DEBUG -->
                    <div ng-show="showDebug" style="font-size: 18px; color:darkorange">
                            <span class="checkbox checkbox-success checkbox-inline">
                                     <input type="checkbox" ng-model="dataDropTrash" id="dataDropTrashId">
                                     <label for="dataDropTrashId">Trash Droppable ?</label>
                            </span> droppable ? : {{dataDropTrash}}
                    </div>
                </div>
            </div>
        </article>

        <div ng-show="plannings.length == 0">Veuillez créer un planning dans l'onglet "Plannings"</div>

    </div>

    <div class="modal-footer">
        <!--<button class="btn btn-primary" type="button" ng-click="ok()">OK</button>-->
        <button class="btn btn-warning" type="button" ng-click="cancel()">Annuler</button>
    </div>

</div>